<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FitPlan Elite">
    <link rel="manifest" href="manifest.json"> <title>FitPlan Elite - Il Tuo Allenamento Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            /* Light Mode - Fitness Inspired */
            --bg-primary-light: #F0F4F8; /* Sfondo principale chiaro, quasi bianco ma più morbido */
            --bg-secondary-light: #FFFFFF; /* Sfondo per card e sezioni */
            --bg-accent-light: #10B981; /* Verde smeraldo per accenti primari (call to action, icone) */
            --bg-accent-hover-light: #059669; /* Verde più scuro per hover */
            --text-primary-light: #1F2937; /* Testo principale scuro (quasi nero) */
            --text-secondary-light: #4B5563; /* Testo secondario grigio scuro */
            --text-accent-light: #10B981; /* Testo con accento verde */
            --border-primary-light: #D1D5DB; /* Bordi principali grigio chiaro */
            --border-accent-light: #10B981; /* Bordi con accento verde */
            --shadow-color-light: rgba(0, 0, 0, 0.08);
            --icon-primary-light: #10B981;
            --icon-secondary-light: #6B7280;
            --input-bg-light: #F9FAFB;
            --input-border-light: #D1D5DB;
            --input-focus-border-light: #10B981;
            --rpe-bg-light: #ECFDF5; /* Sfondo badge RPE verde chiaro */
            --rpe-text-light: #065F46; /* Testo badge RPE verde scuro */
            --rpe-border-light: #A7F3D0; /* Bordo badge RPE verde */
            --header-gradient-start-light: #FFFFFF;
            --header-gradient-end-light: #F0F4F8;


            /* Dark Mode - Fitness Inspired */
            --bg-primary-dark: #111827; /* Sfondo principale molto scuro (quasi nero) */
            --bg-secondary-dark: #1F2937; /* Sfondo per card e sezioni (grigio scuro) */
            --bg-accent-dark: #34D399; /* Verde smeraldo più brillante per accenti primari in dark mode */
            --bg-accent-hover-dark: #10B981; /* Verde smeraldo standard per hover */
            --text-primary-dark: #F3F4F6; /* Testo principale chiaro (quasi bianco) */
            --text-secondary-dark: #9CA3AF; /* Testo secondario grigio chiaro */
            --text-accent-dark: #34D399; /* Testo con accento verde brillante */
            --border-primary-dark: #374151; /* Bordi principali grigio scuro */
            --border-accent-dark: #34D399; /* Bordi con accento verde brillante */
            --shadow-color-dark: rgba(0, 0, 0, 0.3);
            --icon-primary-dark: #34D399;
            --icon-secondary-dark: #9CA3AF;
            --input-bg-dark: #374151;
            --input-border-dark: #4B5563;
            --input-focus-border-dark: #34D399;
            --rpe-bg-dark: #064E3B; /* Sfondo badge RPE verde scuro */
            --rpe-text-dark: #A7F3D0; /* Testo badge RPE verde chiaro */
            --rpe-border-dark: #34D399; /* Bordo badge RPE verde brillante */
            --header-gradient-start-dark: #1F2937;
            --header-gradient-end-dark: #111827;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-primary-light);
            color: var(--text-secondary-light);
            transition: background-color 0.3s ease, color 0.3s ease;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .dark body {
            background-color: var(--bg-primary-dark);
            color: var(--text-secondary-dark);
        }

        h1, h2, h3, .card-title-text {
            font-family: 'Orbitron', sans-serif; /* Font più "tech" per i titoli */
        }

        /* Card Styling */
        .workout-card {
            background-color: var(--bg-secondary-light);
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1.5rem; /* p-6 */
            box-shadow: 0 10px 15px -3px var(--shadow-color-light), 0 4px 6px -4px var(--shadow-color-light);
            margin-bottom: 1.5rem; /* mb-6 */
            border: 1px solid var(--border-primary-light);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        }
        .dark .workout-card {
            background-color: var(--bg-secondary-dark);
            border-color: var(--border-primary-dark);
            box-shadow: 0 10px 15px -3px var(--shadow-color-dark), 0 4px 6px -4px var(--shadow-color-dark);
        }
        .workout-card:hover {
            transform: translateY(-5px) scale(1.01);
            box-shadow: 0 20px 25px -5px var(--shadow-color-light), 0 8px 10px -6px var(--shadow-color-light);
            border-color: var(--border-accent-light);
        }
        .dark .workout-card:hover {
            box-shadow: 0 20px 25px -5px var(--shadow-color-dark), 0 8px 10px -6px var(--shadow-color-dark);
            border-color: var(--border-accent-dark);
        }

        .card-title {
            display: flex;
            align-items: center;
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            color: var(--text-primary-light);
            margin-bottom: 1rem; /* mb-4 */
            padding-bottom: 0.75rem; /* pb-3 */
            border-bottom: 2px solid var(--border-accent-light);
        }
        .dark .card-title {
            color: var(--text-primary-dark);
            border-bottom-color: var(--border-accent-dark);
        }
        .card-title .icon {
            width: 1.75rem; /* w-7 h-7 */
            height: 1.75rem;
            margin-right: 0.75rem; /* mr-3 */
            color: var(--icon-primary-light);
            stroke-width: 2.5;
        }
        .dark .card-title .icon {
            color: var(--icon-primary-dark);
        }

        /* Table Styling */
        .table-container {
            overflow-x: auto;
            border: 1px solid var(--border-primary-light);
            border-radius: 0.5rem; /* rounded-lg */
            background-color: var(--bg-secondary-light);
        }
        .dark .table-container {
            border-color: var(--border-primary-dark);
            background-color: var(--bg-secondary-dark);
        }
        .workout-table {
            width: 100%;
            min-width: 800px;
            border-collapse: separate;
            border-spacing: 0;
        }
        .workout-table th, .workout-table td {
            padding: 0.75rem 1rem; /* py-3 px-4 */
            text-align: left;
            border-bottom: 1px solid var(--border-primary-light);
            white-space: nowrap;
        }
        .dark .workout-table th, .dark .workout-table td {
            border-bottom-color: var(--border-primary-dark);
        }
        .workout-table th {
            background-color: var(--bg-primary-light); /* Leggermente diverso per stacco */
            font-weight: 600; /* font-semibold */
            color: var(--text-primary-light);
            font-size: 0.875rem; /* text-sm */
            text-transform: uppercase;
            letter-spacing: 0.05em;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .dark .workout-table th {
            background-color: var(--bg-primary-dark);
            color: var(--text-primary-dark);
        }
        .workout-table tbody tr:hover {
            background-color: var(--bg-accent-light) !important; /* Usa !important con cautela, ma qui per enfasi hover */
            color: var(--bg-secondary-light) !important;
        }
        .dark .workout-table tbody tr:hover {
            background-color: var(--bg-accent-dark) !important;
            color: var(--bg-secondary-dark) !important;
        }
        .workout-table tbody tr:hover td, .workout-table tbody tr:hover .rpe-badge {
             color: var(--bg-secondary-light) !important; /* Assicura che il testo nel badge cambi colore */
        }
        .dark .workout-table tbody tr:hover td, .dark .workout-table tbody tr:hover .rpe-badge {
             color: var(--bg-secondary-dark) !important;
        }
         .dark .workout-table tbody tr:hover .rpe-badge {
            background-color: var(--bg-secondary-dark); /* Cambia sfondo badge su hover riga */
            border-color: var(--bg-secondary-dark);
        }
        .workout-table tbody tr:hover .rpe-badge {
            background-color: var(--bg-secondary-light);
            border-color: var(--bg-secondary-light);
        }


        /* Input Fields */
        .styled-input {
            background-color: var(--input-bg-light);
            color: var(--text-primary-light);
            border: 1px solid var(--input-border-light);
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.5rem 0.75rem; /* py-2 px-3 */
            font-size: 0.875rem; /* text-sm */
            width: 6rem; /* w-24 */
            text-align: center;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            -moz-appearance: textfield;
        }
        .dark .styled-input {
            background-color: var(--input-bg-dark);
            color: var(--text-primary-dark);
            border-color: var(--input-border-dark);
        }
        .styled-input::-webkit-outer-spin-button,
        .styled-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .styled-input:focus {
            outline: none;
            border-color: var(--input-focus-border-light);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3); /* Ombra focus verde */
        }
        .dark .styled-input:focus {
            border-color: var(--input-focus-border-dark);
            box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.3);
        }

        /* RPE Badge */
        .rpe-badge {
            display: inline-block;
            padding: 0.3rem 0.75rem; /* py-1 px-3 */
            font-size: 0.8rem; /* text-xs */
            font-weight: 700; /* font-bold */
            border-radius: 9999px; /* rounded-full */
            line-height: 1;
            background-color: var(--rpe-bg-light);
            color: var(--rpe-text-light);
            border: 1px solid var(--rpe-border-light);
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .dark .rpe-badge {
            background-color: var(--rpe-bg-dark);
            color: var(--rpe-text-dark);
            border-color: var(--rpe-border-dark);
        }

        /* Header */
        .main-header {
            padding: 2rem 0; /* py-8 */
            margin-bottom: 2.5rem; /* mb-10 */
            text-align: center;
            position: relative;
            background: linear-gradient(135deg, var(--header-gradient-start-light) 0%, var(--header-gradient-end-light) 100%);
        }
        .dark .main-header {
             background: linear-gradient(135deg, var(--header-gradient-start-dark) 0%, var(--header-gradient-end-dark) 100%);
        }
        .main-header h1 {
            font-size: 3rem; /* text-5xl */
            font-weight: 900; /* font-black */
            color: var(--text-primary-light);
            margin-bottom: 0.5rem; /* mb-2 */
            letter-spacing: -0.025em;
        }
        .dark .main-header h1 { color: var(--text-primary-dark); }
        .main-header .subtitle {
            font-size: 1.25rem; /* text-xl */
            color: var(--text-secondary-light);
            font-family: 'Roboto', sans-serif;
        }
        .dark .main-header .subtitle { color: var(--text-secondary-dark); }

        /* Action Buttons (Print, Theme Toggle) */
        .action-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.6rem; /* Increased padding */
            background-color: var(--bg-secondary-light);
            color: var(--text-secondary-light);
            border-radius: 0.5rem; /* rounded-lg */
            border: 1px solid var(--border-primary-light);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 1px 3px 0 var(--shadow-color-light), 0 1px 2px -1px var(--shadow-color-light);
        }
        .dark .action-button {
            background-color: var(--bg-secondary-dark);
            color: var(--text-secondary-dark);
            border-color: var(--border-primary-dark);
            box-shadow: 0 1px 3px 0 var(--shadow-color-dark), 0 1px 2px -1px var(--shadow-color-dark);
        }
        .action-button:hover {
            background-color: var(--bg-accent-light);
            border-color: var(--bg-accent-light);
            color: #FFFFFF; /* Testo bianco su sfondo verde */
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 4px 8px -2px rgba(16,185,129,0.4), 0 2px 4px -2px rgba(16,185,129,0.3);
        }
        .dark .action-button:hover {
            background-color: var(--bg-accent-dark);
            border-color: var(--bg-accent-dark);
            color: var(--bg-primary-dark); /* Testo scuro su sfondo verde brillante */
            box-shadow: 0 4px 8px -2px rgba(52,211,153,0.4), 0 2px 4px -2px rgba(52,211,153,0.3);
        }
        .action-button .icon {
            width: 1.5rem; /* w-6 h-6 */
            height: 1.5rem;
            stroke-width: 2;
        }
        .action-button:hover .icon {
            /* Il colore dell'icona è gestito dal colore del testo del bottone */
        }

        /* Footer */
        .main-footer {
            border-top: 1px solid var(--border-primary-light);
            padding: 2rem 0; /* py-8 */
            margin-top: 2.5rem; /* mt-10 */
            text-align: center;
            font-size: 0.875rem; /* text-sm */
            color: var(--text-secondary-light);
        }
        .dark .main-footer {
            border-top-color: var(--border-primary-dark);
            color: var(--text-secondary-dark);
        }
        .main-footer p { margin-bottom: 0.5rem; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: var(--bg-primary-light); border-radius: 10px; }
        .dark ::-webkit-scrollbar-track { background: var(--bg-primary-dark); }
        ::-webkit-scrollbar-thumb { background: var(--bg-accent-light); border-radius: 10px; border: 2px solid var(--bg-primary-light); }
        .dark ::-webkit-scrollbar-thumb { background: var(--bg-accent-dark); border: 2px solid var(--bg-primary-dark); }
        ::-webkit-scrollbar-thumb:hover { background: var(--bg-accent-hover-light); }
        .dark ::-webkit-scrollbar-thumb:hover { background: var(--bg-accent-hover-dark); }

        /* Print Styles */
        @media print {
            :root {
                --bg-primary-light: #ffffff;
                --bg-secondary-light: #ffffff;
                --text-primary-light: #000000;
                --text-secondary-light: #000000;
                --border-primary-light: #cccccc;
                --border-accent-light: #999999;
                --rpe-bg-light: transparent;
                --rpe-text-light: #000000;
                --rpe-border-light: #999999;
            }
            body {
                background-color: var(--bg-primary-light);
                color: var(--text-primary-light);
                font-size: 10pt;
                margin: 1cm;
                -webkit-print-color-adjust: exact; /* Forza la stampa dei colori di sfondo */
                color-adjust: exact;
            }
            .main-header, .main-footer, .action-buttons-container, .user-data-section, .weekly-schedule-section, .key-principles-section, .nutrition-guide-section, .warmup-cooldown-section, .rpe-guide-section {
                display: none;
            }
            .workout-card {
                box-shadow: none;
                border: 1px solid var(--border-primary-light);
                border-radius: 0;
                padding: 0.5rem;
                margin-bottom: 1rem;
                page-break-inside: avoid;
            }
            .card-title {
                border-bottom: 1px solid var(--border-accent-light);
                font-size: 12pt;
            }
            .card-title .icon { display: none; }
            .workout-table th, .workout-table td {
                padding: 0.3rem 0.5rem;
                border-bottom: 1px solid var(--border-primary-light);
                white-space: normal;
            }
            .workout-table th { background-color: #eeeeee; }
            .workout-table tbody tr:hover { background-color: transparent !important; color: inherit !important; }
            .styled-input {
                border: 1px dashed #999999 !important;
                width: 4rem;
                padding: 0.1rem 0.3rem;
                background-color: #f9f9f9 !important;
                color: #000000 !important;
            }
            .rpe-badge {
                border: 1px solid var(--rpe-border-light) !important;
                color: var(--rpe-text-light) !important;
                background-color: var(--rpe-bg-light) !important;
                padding: 0.1rem 0.4rem;
            }
            .grid { display: block; }
            .workout-table { min-width: auto; }
            .session-title { font-size: 1.5rem; margin-bottom: 1rem; text-align: center; }
        }

        /* Mobile Styles */
        @media (max-width: 768px) { /* md breakpoint */
             body { padding: 0.75rem; } /* p-3 */
             .main-header { padding: 1.5rem 0; margin-bottom: 1.5rem; }
             .main-header h1 { font-size: 2.25rem; } /* text-4xl */
             .main-header .subtitle { font-size: 1rem; } /* text-lg */
             .action-buttons-container { top: 0.75rem; right: 0.75rem; gap: 0.5rem;}
             .action-button { padding: 0.5rem; }
             .action-button .icon { width: 1.25rem; height: 1.25rem;}

             .workout-card { padding: 1rem; margin-bottom: 1rem;}
             .card-title { font-size: 1.25rem; } /* text-xl */
             .card-title .icon { width: 1.5rem; height: 1.5rem;}

             .workout-table th, .workout-table td { padding: 0.6rem 0.5rem; font-size: 0.8rem; }
             .workout-table th { font-size: 0.7rem; }
             .styled-input { width: 5rem; padding: 0.4rem 0.5rem; font-size: 0.8rem;}
             .workout-table { min-width: 650px; }
             .grid-cols-1_lg-grid-cols-2 { grid-template-columns: 1fr; }
             .session-title { font-size: 1.5rem; }
             .main-footer { font-size: 0.75rem; margin-top: 1.5rem; padding: 1.5rem 0;}
        }
        .session-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem; /* text-3xl */
            font-weight: 700; /* font-bold */
            margin-bottom: 2rem; /* mb-8 */
            text-align: center;
            color: var(--text-primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem; /* gap-3 */
        }
        .dark .session-title {
            color: var(--text-primary-dark);
        }
        .session-title .icon {
            width: 2rem; /* w-8 h-8 */
            height: 2rem;
            color: var(--icon-primary-light);
        }
        .dark .session-title .icon {
            color: var(--icon-primary-dark);
        }

    </style>
</head>

<body class="p-4 md:p-6 lg:p-8">

    <header class="main-header">
        <h1>FitPlan Elite</h1>
        <p class="subtitle">Il Tuo Percorso Personalizzato per Forza e Massa Muscolare</p>
        <div class="action-buttons-container absolute top-4 right-4 md:top-6 md:right-8 flex gap-3">
             <button id="theme-toggle" title="Cambia Tema" class="action-button">
                 <span id="theme-icon-light" data-lucide="sun" class="icon"></span>
                 <span id="theme-icon-dark" data-lucide="moon" class="icon hidden"></span>
             </button>
             <button id="printBtn" title="Stampa Scheda" class="action-button">
                 <span data-lucide="printer" class="icon"></span>
             </button>
        </div>
    </header>

    <main class="max-w-7xl mx-auto">

        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10 user-data-section weekly-schedule-section">
            <div class="workout-card">
                <h2 class="card-title">
                    <span data-lucide="user" class="icon"></span>
                    <span class="card-title-text">Profilo Atleta</span>
                </h2>
                <ul class="space-y-2 text-sm md:text-base">
                    <li class="flex items-center"><span data-lucide="cake" class="w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"></span><span class="font-medium text-gray-700 dark:text-gray-300 w-28">Età:</span> 24 anni</li>
                    <li class="flex items-center"><span data-lucide="weight" class="w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"></span><span class="font-medium text-gray-700 dark:text-gray-300 w-28">Peso:</span> 70 kg</li>
                    <li class="flex items-center"><span data-lucide="ruler" class="w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"></span><span class="font-medium text-gray-700 dark:text-gray-300 w-28">Altezza:</span> 175 cm</li>
                    <li class="flex items-center"><span data-lucide="bar-chart-3" class="w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"></span><span class="font-medium text-gray-700 dark:text-gray-300 w-28">Livello:</span> Intermedio</li>
                    <li class="flex items-center"><span data-lucide="repeat" class="w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"></span><span class="font-medium text-gray-700 dark:text-gray-300 w-28">Frequenza:</span> 4 / sett.</li>
                    <li class="flex items-center"><span data-lucide="timer" class="w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"></span><span class="font-medium text-gray-700 dark:text-gray-300 w-28">Durata:</span> 60-90 min</li>
                </ul>
            </div>
            <div class="workout-card">
                <h2 class="card-title">
                    <span data-lucide="calendar-days" class="icon"></span>
                     <span class="card-title-text">Split Settimanale</span>
                </h2>
                <ul class="space-y-1.5 text-sm md:text-base">
                    <li><strong class="text-emerald-600 dark:text-emerald-400">Lunedì:</strong> Giorno 1 (Forza - Upper Body)</li>
                    <li><strong class="text-emerald-600 dark:text-emerald-400">Martedì:</strong> Giorno 2 (Forza - Lower Body & Core)</li>
                    <li class="text-gray-400 dark:text-gray-600"><strong>Mercoledì:</strong> Riposo / Recupero Attivo</li>
                    <li><strong class="text-sky-600 dark:text-sky-400">Giovedì:</strong> Giorno 3 (Ipertrofia - Upper Body)</li>
                    <li><strong class="text-sky-600 dark:text-sky-400">Venerdì:</strong> Giorno 4 (Ipertrofia - Lower Body & Core)</li>
                    <li class="text-gray-400 dark:text-gray-600"><strong>Sabato:</strong> Riposo / Recupero Attivo</li>
                    <li class="text-gray-400 dark:text-gray-600"><strong>Domenica:</strong> Riposo</li>
                </ul>
                <p class="text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-4 italic">Questo split è un suggerimento. Adattalo ai tuoi impegni, mantenendo i giorni di riposo.</p>
            </div>
        </section>

        <section class="workout-card mb-10 warmup-cooldown-section">
             <h2 class="card-title">
                 <span data-lucide="flame" class="icon"></span>
                 <span class="card-title-text">Warm-up & Cool-down</span>
             </h2>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                 <div>
                     <h3 class="font-semibold text-gray-700 dark:text-gray-300 mb-2 text-lg flex items-center"><span data-lucide="sunrise" class="w-5 h-5 mr-2"></span>Riscaldamento (10-15 min)</h3>
                     <ul class="list-disc list-inside space-y-1 text-sm text-gray-600 dark:text-gray-400 pl-2">
                         <li>5 min cardio leggero (cyclette, ellittica, salto corda)</li>
                         <li>Mobilità articolare dinamica: circonduzioni (collo, spalle, polsi, busto, anche, ginocchia, caviglie)</li>
                         <li>Attivazione specifica: 1-2 serie leggere degli esercizi principali del giorno (es. solo bilanciere per panca/squat)</li>
                         <li>Esercizi per la cuffia dei rotatori (bande elastiche) se si allena l'upper body.</li>
                     </ul>
                 </div>
                 <div>
                     <h3 class="font-semibold text-gray-700 dark:text-gray-300 mb-2 text-lg flex items-center"><span data-lucide="sunset" class="w-5 h-5 mr-2"></span>Defaticamento (5-10 min)</h3>
                     <ul class="list-disc list-inside space-y-1 text-sm text-gray-600 dark:text-gray-400 pl-2">
                          <li>5 min cardio leggero (camminata)</li>
                          <li>Stretching statico per i principali gruppi muscolari allenati (tenere ogni posizione per 20-30 secondi)</li>
                          <li>Foam rolling (opzionale)</li>
                          <li>Respirazione diaframmatica per rilassamento.</li>
                     </ul>
                 </div>
             </div>
        </section>

        <section class="workout-card mb-10 rpe-guide-section">
            <h2 class="card-title">
                <span data-lucide="activity" class="icon"></span>
                <span class="card-title-text">Guida alla Scala RPE</span>
            </h2>
            <p class="text-sm md:text-base mb-4">
                L'RPE (Rate of Perceived Exertion) è una misura soggettiva dell'intensità dello sforzo. Ti aiuta a personalizzare il carico in base alle tue sensazioni giornaliere.
                <strong>RIR (Reps In Reserve)</strong> indica quante ripetizioni pulite avresti ancora potuto fare.
            </p>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-gray-100 dark:bg-gray-700">
                        <tr>
                            <th class="p-2 border dark:border-gray-600">RPE</th>
                            <th class="p-2 border dark:border-gray-600">Descrizione Sforzo</th>
                            <th class="p-2 border dark:border-gray-600">RIR</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td class="p-2 border dark:border-gray-600"><strong>10</strong></td><td class="p-2 border dark:border-gray-600">Massimale, cedimento tecnico</td><td class="p-2 border dark:border-gray-600">0</td></tr>
                        <tr><td class="p-2 border dark:border-gray-600"><strong>9.5</strong></td><td class="p-2 border dark:border-gray-600">Estremamente duro, forse 1 rep in più</td><td class="p-2 border dark:border-gray-600">0-1</td></tr>
                        <tr><td class="p-2 border dark:border-gray-600"><strong>9</strong></td><td class="p-2 border dark:border-gray-600">Molto duro</td><td class="p-2 border dark:border-gray-600">1</td></tr>
                        <tr><td class="p-2 border dark:border-gray-600"><strong>8.5</strong></td><td class="p-2 border dark:border-gray-600">Duro, forse 2 rep in più</td><td class="p-2 border dark:border-gray-600">1-2</td></tr>
                        <tr><td class="p-2 border dark:border-gray-600"><strong>8</strong></td><td class="p-2 border dark:border-gray-600">Duro</td><td class="p-2 border dark:border-gray-600">2</td></tr>
                        <tr><td class="p-2 border dark:border-gray-600"><strong>7</strong></td><td class="p-2 border dark:border-gray-600">Moderato-Duro</td><td class="p-2 border dark:border-gray-600">3</td></tr>
                        <tr><td class="p-2 border dark:border-gray-600"><strong>5-6</strong></td><td class="p-2 border dark:border-gray-600">Moderato</td><td class="p-2 border dark:border-gray-600">4-6</td></tr>
                        <tr><td class="p-2 border dark:border-gray-600"><strong>1-4</strong></td><td class="p-2 border dark:border-gray-600">Leggero, recupero/riscaldamento</td><td class="p-2 border dark:border-gray-600">>6</td></tr>
                    </tbody>
                </table>
            </div>
            <p class="text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-4 italic">
                Sii onesto nella valutazione. L'RPE target è una guida; adatta il peso per raggiungerlo.
            </p>
        </section>

        <section>
            <h2 class="session-title">
                 <span data-lucide="swords" class="icon"></span>
                 Sessioni di Forza
                 <span data-lucide="shield-check" class="icon"></span>
            </h2>

            <article class="workout-card">
                <h3 class="card-title">
                    <span data-lucide="git-commit" class="icon"></span> <span class="card-title-text">Giorno 1: Forza - Upper Body</span>
                </h3>
                <div class="table-container">
                    <table class="workout-table">
                        <thead>
                            <tr>
                                <th>Esercizio</th><th>Serie</th><th>Rip.</th><th>Recupero</th><th>RPE Target</th><th>Peso (kg)</th><th>RPE Eff.</th><th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">Panca Piana Bilanciere</td><td>4</td><td>3-5</td><td>2-3 min</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Panca Piana Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Panca Piana Forza"></td>
                                <td>Focus spinta esplosiva, controllo eccentrica.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Rematore Bilanciere (Pendlay/Yates)</td><td>4</td><td>4-6</td><td>2-3 min</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Rematore Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Rematore Forza"></td>
                                <td>Schiena forte, tirata al petto/addome.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Military Press (in piedi)</td><td>3</td><td>4-6</td><td>2 min</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Military Press Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Military Press Forza"></td>
                                <td>Core attivo, no leg drive eccessivo.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Trazioni alla Sbarra (prona/supina)</td><td>3</td><td>Max reps (target 5-8)</td><td>2 min</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="BW" aria-label="Peso Trazioni Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Trazioni Forza"></td>
                                <td>Zavorrare se >8 reps facili. Se <5, usare Lat Machine.</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Dip alle Parallele</td><td>3</td><td>6-10</td><td>1.5-2 min</td><td><span class="rpe-badge">8</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="BW" aria-label="Peso Dip Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Dip Forza"></td>
                                <td>Focus petto/tricipiti. Zavorrare se necessario.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article>

            <article class="workout-card">
                 <h3 class="card-title">
                    <span data-lucide="anchor" class="icon"></span> <span class="card-title-text">Giorno 2: Forza - Lower Body & Core</span>
                </h3>
                 <div class="table-container">
                    <table class="workout-table">
                        <thead>
                            <tr>
                                <th>Esercizio</th><th>Serie</th><th>Rip.</th><th>Recupero</th><th>RPE Target</th><th>Peso (kg)</th><th>RPE Eff.</th><th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">Squat Bilanciere (High/Low Bar)</td><td>4</td><td>3-5</td><td>3 min</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Squat Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Squat Forza"></td>
                                <td>Profondità (almeno parallelo), schiena neutra.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Stacco da Terra (Conv./Sumo)</td><td>1</td><td>3-5 (Top Set)</td><td>3-4 min</td><td><span class="rpe-badge">9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Stacco Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Stacco Forza"></td>
                                <td>Tecnica impeccabile. Eventuali serie di back-off più leggere (2x5 @RPE 7).</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Good Morning / Stacco Rumeno</td><td>3</td><td>6-8</td><td>2 min</td><td><span class="rpe-badge">8</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Good Morning/RDL Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Good Morning/RDL Forza"></td>
                                <td>Focus catena posteriore.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Affondi Bilanciere/Manubri</td><td>3</td><td>6-8 / gamba</td><td>1.5-2 min</td><td><span class="rpe-badge">8</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Affondi Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Affondi Forza"></td>
                                <td>Controllo e stabilità.</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Plank Zavorrato / Dragon Flag</td><td>3</td><td>30-60 sec / Max reps</td><td>1 min</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="text" class="styled-input" placeholder="--" aria-label="Peso/Note Core Forza"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Core Forza"></td>
                                <td>Core contratto al massimo.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article>

            <div class="workout-card my-8 bg-gray-50 dark:bg-gray-800 border-dashed border-gray-300 dark:border-gray-700">
                <h3 class="card-title text-gray-600 dark:text-gray-400">
                   <span data-lucide="coffee" class="icon text-gray-500 dark:text-gray-500"></span>
                   <span class="card-title-text">Mercoledì: Riposo Attivo</span>
               </h3>
               <p class="text-sm md:text-base text-gray-600 dark:text-gray-400">
                   Giornata dedicata al recupero. Considera:
                   <ul class="list-disc list-inside pl-4 mt-2 space-y-1">
                       <li>Camminata leggera (30-60 minuti)</li>
                       <li>Yoga o stretching leggero</li>
                       <li>Mobilità articolare</li>
                       <li>Sonno di qualità e nutrizione adeguata.</li>
                   </ul>
                   L'obiettivo è favorire il recupero senza affaticare ulteriormente il corpo.
               </p>
           </div>


            <h2 class="session-title mt-12">
                 <span data-lucide="gem" class="icon"></span>
                 Sessioni di Ipertrofia
                 <span data-lucide="trending-up" class="icon"></span>
            </h2>

            <article class="workout-card">
                 <h3 class="card-title">
                    <span data-lucide="user-plus" class="icon"></span> <span class="card-title-text">Giorno 3: Ipertrofia - Upper Body</span>
                </h3>
                 <div class="table-container">
                    <table class="workout-table">
                        <thead>
                            <tr>
                                <th>Esercizio</th><th>Serie</th><th>Rip.</th><th>Recupero</th><th>RPE Target</th><th>Peso (kg)</th><th>RPE Eff.</th><th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">Panca Inclinata Manubri</td><td>3-4</td><td>8-12</td><td>60-90 sec</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Panca Inclinata Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Panca Inclinata Ipertrofia"></td>
                                <td>Stretch e contrazione del petto alto.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Lat Machine Presa Larga / Trazioni Assistite</td><td>3-4</td><td>10-15</td><td>60-90 sec</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Lat Machine Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Lat Machine Ipertrofia"></td>
                                <td>Focus ampiezza dorso.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Croci ai Cavi / Pectoral Machine</td><td>3</td><td>12-15</td><td>60 sec</td><td><span class="rpe-badge">9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Croci/Pec Machine Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Croci/Pec Machine Ipertrofia"></td>
                                <td>Contrazione di picco.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Shoulder Press Manubri (seduto)</td><td>3</td><td>10-15</td><td>60-90 sec</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Shoulder Press Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Shoulder Press Ipertrofia"></td>
                                <td>Movimento controllato.</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Alzate Laterali Manubri</td><td>3-4</td><td>12-20</td><td>45-60 sec</td><td><span class="rpe-badge">9-10</span></td>
                                <td><input type="number" class="styled-input" step="0.25" placeholder="--" aria-label="Peso Alzate Laterali Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Alzate Laterali Ipertrofia"></td>
                                <td>Bruciore! Tecnica pulita.</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Curl Bilanciere EZ / Manubri Alternato</td><td>3</td><td>10-15</td><td>60 sec</td><td><span class="rpe-badge">9</span></td>
                                <td><input type="number" class="styled-input" step="0.25" placeholder="--" aria-label="Peso Curl Bicipiti Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Curl Bicipiti Ipertrofia"></td>
                                <td>Supinazione completa se con manubri.</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Push Down ai Cavi (corda/barra V)</td><td>3</td><td>12-15</td><td>60 sec</td><td><span class="rpe-badge">9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Push Down Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Push Down Ipertrofia"></td>
                                <td>Estensione completa tricipite.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article>

            <article class="workout-card">
                 <h3 class="card-title">
                    <span data-lucide="mountain" class="icon"></span> <span class="card-title-text">Giorno 4: Ipertrofia - Lower Body & Core</span>
                </h3>
                <div class="table-container">
                    <table class="workout-table">
                        <thead>
                            <tr>
                                <th>Esercizio</th><th>Serie</th><th>Rip.</th><th>Recupero</th><th>RPE Target</th><th>Peso (kg)</th><th>RPE Eff.</th><th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">Leg Press / Hack Squat</td><td>4</td><td>10-15</td><td>90 sec</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="1" placeholder="--" aria-label="Peso Leg Press/Hack Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Leg Press/Hack Ipertrofia"></td>
                                <td>Profondità e tempo sotto tensione.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Affondi Bulgari / Stacchi Rumeni Manubri</td><td>3</td><td>10-15 / gamba</td><td>60-90 sec</td><td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Affondi Bulgari/RDL DB Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Affondi Bulgari/RDL DB Ipertrofia"></td>
                                <td>Focus glutei e femorali.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Leg Extension</td><td>3-4</td><td>15-20</td><td>45-60 sec</td><td><span class="rpe-badge">9-10</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Leg Extension Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Leg Extension Ipertrofia"></td>
                                <td>Contrazione di picco, bruciore.</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Leg Curl (sdraiato/seduto)</td><td>3-4</td><td>12-18</td><td>45-60 sec</td><td><span class="rpe-badge">9-10</span></td>
                                <td><input type="number" class="styled-input" step="0.5" placeholder="--" aria-label="Peso Leg Curl Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Leg Curl Ipertrofia"></td>
                                <td>Connessione mente-muscolo.</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Calf Raise (in piedi e/o seduto)</td><td>4</td><td>15-25</td><td>45 sec</td><td><span class="rpe-badge">9-10</span></td>
                                <td><input type="number" class="styled-input" step="1" placeholder="--" aria-label="Peso Calf Raise Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Calf Raise Ipertrofia"></td>
                                <td>Range completo, pausa in contrazione.</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Crunch ai Cavi / Leg Raise Appeso</td><td>3</td><td>15-20 / Max reps</td><td>60 sec</td><td><span class="rpe-badge">9</span></td>
                                <td><input type="text" class="styled-input" placeholder="--" aria-label="Peso/Note Core Ipertrofia"></td>
                                <td><input type="number" class="styled-input" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE Core Ipertrofia"></td>
                                <td>Contrazione addominale completa.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article>

            <div class="workout-card my-8 bg-gray-50 dark:bg-gray-800 border-dashed border-gray-300 dark:border-gray-700">
                 <h3 class="card-title text-gray-600 dark:text-gray-400">
                    <span data-lucide="battery-charging" class="icon text-gray-500 dark:text-gray-500"></span>
                    <span class="card-title-text">Sabato & Domenica: Riposo e Preparazione</span>
                </h3>
                <p class="text-sm md:text-base text-gray-600 dark:text-gray-400">
                    Questi giorni sono cruciali per il recupero e la crescita. Priorità a:
                    <ul class="list-disc list-inside pl-4 mt-2 space-y-1">
                        <li><strong>Nutrizione:</strong> Assicurati un adeguato apporto calorico e proteico.</li>
                        <li><strong>Idratazione:</strong> Bevi abbondante acqua.</li>
                        <li><strong>Sonno:</strong> Punta a 7-9 ore di sonno di qualità per notte.</li>
                        <li><strong>Recupero Attivo (Opzionale):</strong> Se ti senti bene, una camminata leggera, stretching o foam rolling possono aiutare. Evita attività intense.</li>
                        <li><strong>Pianificazione:</strong> Prepara mentalmente e logisticamente la settimana di allenamenti successiva.</li>
                    </ul>
                </p>
            </div>
        </section>

        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 my-10 key-principles-section nutrition-guide-section">
            <div class="workout-card">
                 <h2 class="card-title">
                    <span data-lucide="key" class="icon"></span>
                    <span class="card-title-text">Principi Fondamentali</span>
                </h2>
                <ul class="list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400 text-sm pl-2">
                    <li><strong>Sovraccarico Progressivo:</strong> È la chiave. Cerca di migliorare ogni settimana: più peso, più ripetizioni (nello stesso RPE), più serie, o tecnica migliore. Traccia i tuoi progressi!</li>
                    <li><strong>Tecnica > Carico:</strong> Una forma scorretta aumenta il rischio di infortuni e riduce l'efficacia dell'esercizio. Filmati se necessario.</li>
                    <li><strong>Scala RPE/RIR:</strong> Impara ad ascoltare il tuo corpo. L'RPE ti guida sull'intensità. Non tutti i giorni sono uguali.</li>
                    <li><strong>Costanza e Pazienza:</strong> I risultati richiedono tempo e dedizione. Non scoraggiarti.</li>
                    <li><strong>Periodizzazione (Base):</strong> Alternare focus su forza e ipertrofia è una forma di periodizzazione. Considera un "deload" (settimana di scarico) ogni 6-10 settimane per favorire il recupero a lungo termine (riduci volume e/o intensità del 30-50%).</li>
                    <li><strong>Ascolta il Tuo Corpo:</strong> Se senti dolore acuto (diverso dalla fatica muscolare), fermati. Non allenarti se sei malato.</li>
                </ul>
            </div>
            <div class="workout-card">
                 <h2 class="card-title">
                    <span data-lucide="utensils-crossed" class="icon"></span>
                    <span class="card-title-text">Guida Nutrizionale</span>
                </h2>
                 <ul class="list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400 text-sm pl-2">
                    <li><strong>Calorie:</strong>
                        <ul class="list-circle list-inside pl-4">
                            <li><strong>Forza:</strong> Mantenimento o leggero surplus (TDEE / TDEE + 200-300 kcal).</li>
                            <li><strong>Ipertrofia:</strong> Leggero/moderato surplus (TDEE + 300-500 kcal).</li>
                        </ul>
                    </li>
                    <li><strong>Proteine:</strong> 1.6-2.2g per kg di peso corporeo. Fondamentali per la riparazione e crescita muscolare. (Es: 70kg * 2g = 140g/giorno).</li>
                    <li><strong>Carboidrati:</strong> Principalmente complessi (avena, riso, patate, frutta, verdura). Forniscono energia. Timing: utili attorno all'allenamento.</li>
                    <li><strong>Grassi:</strong> Sani (avocado, frutta secca, olio EVO, pesce grasso). Circa 0.8-1.2g per kg di peso. Essenziali per la salute ormonale.</li>
                    <li><strong>Idratazione:</strong> Almeno 2-3 litri di acqua al giorno, di più se ti alleni intensamente o fa caldo.</li>
                    <li><strong>Timing dei Nutrienti:</strong> Non è il fattore più critico, ma consumare proteine e carboidrati nel post-workout (entro 1-2 ore) può essere benefico.</li>
                    <li><strong>Integrazione (Opzionale):</strong> Creatina Monoidrato (3-5g/giorno) è sicura ed efficace. Proteine in polvere se fai fatica a raggiungere il fabbisogno. Vitamina D se carente. Omega-3.</li>
                </ul>
                 <p class="text-xs text-gray-500 dark:text-gray-400 mt-4 italic">Queste sono linee guida. Per un piano dettagliato, consulta un nutrizionista sportivo.</p>
            </div>
        </section>

         <footer class="main-footer">
             <p class="mb-2"><strong>Disclaimer Importante:</strong> Questa scheda di allenamento è fornita a scopo informativo e si basa su principi generali di fitness. Non sostituisce il parere di un medico qualificato o di un personal trainer certificato. Consulta sempre un professionista prima di iniziare qualsiasi nuovo programma di allenamento o regime alimentare, specialmente se hai condizioni mediche preesistenti. Esegui gli esercizi con la tecnica corretta per prevenire infortuni. L'utilizzo di questa scheda è a tuo rischio e pericolo.</p>
             <p>&copy; <span id="currentYear"></span> FitPlan Elite - Generato per te.</p>
         </footer>
    </main>

    <script>
        const themeToggle = document.getElementById('theme-toggle');
        const printButton = document.getElementById('printBtn');
        const docHtml = document.documentElement;
        const themeIconLight = document.getElementById('theme-icon-light');
        const themeIconDark = document.getElementById('theme-icon-dark');
        const currentYearSpan = document.getElementById('currentYear');

        // Set current year in footer
        if (currentYearSpan) {
            currentYearSpan.textContent = new Date().getFullYear();
        }

        const applyTheme = (theme) => {
            if (theme === 'dark') {
                docHtml.classList.add('dark');
                if(themeIconLight) themeIconLight.classList.add('hidden');
                if(themeIconDark) themeIconDark.classList.remove('hidden');
            } else {
                docHtml.classList.remove('dark');
                if(themeIconLight) themeIconLight.classList.remove('hidden');
                if(themeIconDark) themeIconDark.classList.add('hidden');
            }
            // Lucide icons might need re-rendering after theme change if colors are dynamic via CSS vars affecting SVG
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        };

        const toggleTheme = () => {
            const currentTheme = docHtml.classList.contains('dark') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        };

        if (themeToggle) {
            themeToggle.addEventListener('click', toggleTheme);
        }

        if (printButton) {
            printButton.addEventListener('click', () => {
                window.print();
            });
        }

        // Save and Load input data
        const saveInputData = () => {
            const inputs = document.querySelectorAll('.styled-input');
            const data = {};
            inputs.forEach(input => {
                const id = input.getAttribute('aria-label');
                if (id) { // Only save if aria-label (our key) exists
                    data[id] = input.value;
                }
            });
            localStorage.setItem('fitPlanEliteData', JSON.stringify(data));
        };

        const loadInputData = () => {
            const savedData = localStorage.getItem('fitPlanEliteData');
            if (savedData) {
                const data = JSON.parse(savedData);
                const inputs = document.querySelectorAll('.styled-input');
                inputs.forEach(input => {
                    const id = input.getAttribute('aria-label');
                    if (id && data[id] !== undefined) {
                        input.value = data[id];
                    }
                });
            }
        };

        const setupInputListeners = () => {
            const inputs = document.querySelectorAll('.styled-input');
            inputs.forEach(input => {
                input.addEventListener('change', saveInputData);
                input.addEventListener('input', saveInputData); // More responsive saving
            });
        };
        
        // Initial Setup
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedTheme) {
                applyTheme(savedTheme);
            } else if (prefersDark) {
                applyTheme('dark');
            } else {
                applyTheme('light'); // Default
            }
            
            loadInputData();
            setupInputListeners();
            console.log("FitPlan Elite caricato e pronto!");
        });
    </script>

</body>
</html>
