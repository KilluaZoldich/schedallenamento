<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scheda Allenamento Personalizzata - Forza & Ipertrofia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /*------------------------------------*\
          #VARIABLES & BASE STYLES
        \*------------------------------------*/
        :root {
            /* Light Mode Colors */
            --bg-primary: #f7f8fc;
            --bg-secondary: #ffffff;
            --bg-muted: #f1f5f9; /* slate-100 */
            --bg-hover: #dbeafe; /* blue-100 */
            --bg-input: #ffffff;
            --text-primary: #1e293b; /* slate-800 */
            --text-secondary: #334155; /* slate-700 */
            --text-muted: #64748b; /* slate-500 */
            --text-accent: #2563eb; /* blue-600 */
            --border-primary: #e2e8f0; /* slate-200 */
            --border-secondary: #cbd5e1; /* slate-300 */
            --border-accent: #3b82f6; /* blue-500 */
            --icon-primary: #3b82f6;
            --icon-secondary: #64748b;
            --shadow-color: rgba(0, 0, 0, 0.05);
            --shadow-hover-color: rgba(0, 0, 0, 0.08);
            --scrollbar-track: #f1f5f9;
            --scrollbar-thumb: #94a3b8;
            --scrollbar-thumb-hover: #64748b;
            --rpe-bg: #eff6ff;
            --rpe-text: #2563eb;
            --rpe-border: #bfdbfe;
            --rest-bg: #f0f9ff;
            --rest-border: #bae6fd;
            --rest-title-text: #0369a1;
            --rest-title-border: #7dd3fc;
            --rest-text: #0ea5e9;
            --rest-icon: #0ea5e9;
            --gradient-start: #ffffff;
            --gradient-end: #f7f8fc;
        }

        .dark {
            /* Dark Mode Colors - Enhanced Aesthetics */
            --bg-primary: #111827; /* slate-900 with slight adjustment */
            --bg-secondary: #1f2937; /* slate-800 with better contrast */
            --bg-muted: #374151; /* slate-700 slightly lighter */
            --bg-hover: #2563eb; /* blue-600 more vibrant */
            --bg-input: #374151; /* slate-700 for better readability */
            --text-primary: #f9fafb; /* gray-50 for sharper text */
            --text-secondary: #e5e7eb; /* gray-200 for better contrast */
            --text-muted: #9ca3af; /* gray-400 slightly brighter */
            --text-accent: #93c5fd; /* blue-300 more vibrant */
            --border-primary: #374151; /* slate-700 for subtle borders */
            --border-secondary: #4b5563; /* slate-600 with better definition */
            --border-accent: #93c5fd; /* blue-300 for better accent */
            --icon-primary: #93c5fd; /* blue-300 for vibrant icons */
            --icon-secondary: #9ca3af; /* gray-400 for secondary icons */
            --shadow-color: rgba(0, 0, 0, 0.25); /* Deeper shadows */
            --shadow-hover-color: rgba(0, 0, 0, 0.35); /* More pronounced hover effect */
            --scrollbar-track: #1f2937; /* slate-800 for scrollbar */
            --scrollbar-thumb: #4b5563; /* slate-600 for thumb */
            --scrollbar-thumb-hover: #6b7280; /* slate-500 for hover */
            --rpe-bg: #1e40af; /* blue-800 more refined */
            --rpe-text: #dbeafe; /* blue-100 for better readability */
            --rpe-border: #3b82f6; /* blue-500 for definition */
            --rest-bg: #0e7490; /* sky-800 more vibrant */
            --rest-border: #06b6d4; /* sky-500 brighter */
            --rest-title-text: #e0f2fe; /* sky-100 for better readability */
            --rest-title-border: #38bdf8; /* sky-400 for definition */
            --rest-text: #a5f3fc; /* sky-200 brighter */
            --rest-icon: #a5f3fc; /* sky-200 matching text */
            --gradient-start: #1f2937; /* slate-800 for gradient */
            --gradient-end: #111827; /* slate-900 for gradient */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-secondary);
            transition: background-color 0.3s ease, color 0.3s ease;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /*------------------------------------*\
          #COMPONENTS (Card, Table, Buttons etc.)
        \*------------------------------------*/

        /* Card */
        .card {
            background-color: var(--bg-secondary);
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px var(--shadow-color), 0 2px 4px -2px var(--shadow-color);
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-primary);
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1), 
                        box-shadow 0.3s cubic-bezier(0.2, 0.8, 0.2, 1), 
                        background-color 0.3s ease, 
                        border-color 0.3s ease;
            backdrop-filter: blur(5px);
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 20px -3px var(--shadow-hover-color), 0 4px 8px -4px var(--shadow-hover-color);
            border-color: var(--border-accent);
        }
        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1.25rem;
            color: var(--text-primary);
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-accent);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.3s ease, border-color 0.3s ease;
        }
        .card-title .icon {
            width: 1.125rem;
            height: 1.125rem;
            stroke-width: 2.5;
            color: var(--icon-primary);
            transition: color 0.3s ease;
        }

        /* Table */
        .table-container {
            overflow-x: auto;
            border: 1px solid var(--border-primary);
            border-radius: 0.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .dark .table-container {
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }
        .table-container table {
            width: 100%;
            min-width: 700px; /* Increased min-width for new columns */
            border-collapse: separate; /* Changed for better styling */
            border-spacing: 0;
        }
        .table-container table tr:last-child td { 
            border-bottom: none; 
        }
        th, td {
            padding: 0.85rem 0.75rem; /* Adjusted padding */
            text-align: left;
            border-bottom: 1px solid var(--border-primary);
            vertical-align: middle;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap; /* Prevent text wrapping in cells */
        }
        th {
            background-color: var(--bg-muted);
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.75rem; /* Slightly smaller header */
            text-transform: uppercase;
            letter-spacing: 0.05em;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .dark th {
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        tbody tr {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        tbody tr:nth-child(odd) { background-color: var(--bg-secondary); }
        tbody tr:nth-child(even) { background-color: var(--bg-muted); }
        tbody tr:hover { 
            background-color: var(--bg-hover); 
            transform: translateY(-1px);
        }
        .dark tbody tr:hover {
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        /* Input Fields in Table */
        td input[type="number"] {
            background-color: var(--bg-input);
            color: var(--text-primary);
            border: 1px solid var(--border-secondary);
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.3rem 0.5rem;
            font-size: 0.875rem;
            width: 5.5rem; /* Fixed width for inputs */
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            -moz-appearance: textfield; /* Hide spinners Firefox */
        }
        td input[type="number"]::-webkit-outer-spin-button,
        td input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none; /* Hide spinners Chrome, Safari, Edge, Opera */
            margin: 0;
        }
        td input[type="number"]:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: var(--border-accent);
            box-shadow: 0 0 0 2px var(--bg-secondary), 0 0 0 4px var(--border-accent);
            transform: scale(1.05);
        }
        .dark td input[type="number"] {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) inset;
        }

        /* RPE Badge */
        .rpe-badge {
            display: inline-block;
            padding: 0.25rem 0.6rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 9999px;
            line-height: 1;
            background-color: var(--rpe-bg);
            color: var(--rpe-text);
            border: 1px solid var(--rpe-border);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .dark .rpe-badge {
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
        }

        /* Rest Card */
        .rest-card {
            background-color: var(--rest-bg);
            border-color: var(--rest-border);
        }
        .rest-card .card-title {
            color: var(--rest-title-text);
            border-color: var(--rest-title-border);
        }
         .rest-card .card-title .icon { color: var(--rest-icon); }
        .rest-card p { color: var(--rest-text); }

        /* Header */
        header {
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-primary);
            background: linear-gradient(to bottom, var(--gradient-start), var(--gradient-end));
            transition: border-color 0.3s ease, background 0.3s ease;
        }
        header h1 { color: var(--text-primary); transition: color 0.3s ease; }
        header p { color: var(--text-muted); transition: color 0.3s ease; }

        /* Footer */
        footer {
            border-top: 1px solid var(--border-primary);
            padding-top: 1.5rem;
            color: var(--text-muted);
            transition: border-color 0.3s ease, color 0.3s ease;
        }

        /* Action Buttons (Print, Theme Toggle) */
        .action-button {
            display: inline-flex;
            align-items: center;
            justify-content: center; /* Center icon */
            padding: 0.5rem; /* Square padding */
            background-color: var(--bg-secondary);
            color: var(--text-secondary);
            border-radius: 0.5rem; /* rounded-lg */
            border: 1px solid var(--border-primary);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 1px 3px 0 var(--shadow-color), 0 1px 2px -1px var(--shadow-color);
            position: relative;
            overflow: hidden;
        }
        .action-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, var(--border-accent) 0%, transparent 70%);
            opacity: 0;
            transform: scale(0.5);
            transition: opacity 0.4s ease, transform 0.3s ease;
        }
        .action-button:hover {
            background-color: var(--bg-muted);
            border-color: var(--border-accent);
            color: var(--text-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px var(--shadow-color), 0 2px 4px -1px var(--shadow-color);
        }
        .action-button:hover::after {
            opacity: 0.15;
            transform: scale(2);
        }
        .action-button .icon {
            width: 1.25rem; /* Larger icon */
            height: 1.25rem;
            stroke-width: 2;
            color: var(--icon-secondary); /* Use secondary icon color */
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }
        .action-button:hover .icon {
            color: var(--icon-primary); /* Use primary icon color on hover */
            transform: scale(1.1);
        }
        .dark .action-button {
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        .dark .action-button:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--scrollbar-track); border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 10px; border: 2px solid var(--scrollbar-track); }
        ::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover); }
        
        /* Theme Transition Animation */
        .theme-transition {
            transition: background-color 0.5s ease, 
                        color 0.5s ease, 
                        border-color 0.5s ease, 
                        box-shadow 0.5s ease !important;
        }
        
        .theme-transition * {
            transition: background-color 0.5s ease, 
                        color 0.5s ease, 
                        border-color 0.5s ease, 
                        box-shadow 0.5s ease !important;
        }
        
        .theme-toggle-active {
            animation: pulse 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .dark .card, .dark .table-container, .dark .action-button {
            backdrop-filter: blur(5px);
        }

        /*------------------------------------*\
          #PRINT STYLES
        \*------------------------------------*/
        @media print {
            :root { /* Reset variables for print */
                --bg-primary: #ffffff;
                --bg-secondary: #ffffff;
                --bg-muted: #eeeeee;
                --text-primary: #000000;
                --text-secondary: #000000;
                --text-muted: #333333;
                --border-primary: #cccccc;
                --border-secondary: #dddddd;
                --border-accent: #999999;
                --rpe-bg: transparent;
                --rpe-text: #000000;
                --rpe-border: #999999;
                --rest-bg: #f5f5f5;
                --rest-border: #cccccc;
                --rest-title-text: #000000;
                --rest-title-border: #999999;
                --rest-text: #333333;
            }
            body {
                background-color: var(--bg-primary);
                color: var(--text-primary);
                font-size: 10pt;
                margin: 1cm;
            }
            header, footer, .action-buttons-container { /* Hide header, footer, and action buttons */
                display: none;
            }
            .card, .table-container {
                box-shadow: none;
                border: 1px solid var(--border-primary);
                border-radius: 0;
                padding: 0.5rem;
                margin-bottom: 1rem;
                page-break-inside: avoid;
            }
            .card:hover { transform: none; }
            .card-title {
                border-bottom: 1px solid var(--border-accent);
                font-size: 12pt;
                color: var(--text-primary);
            }
            .card-title .icon { display: none; } /* Hide icons */
            th, td {
                padding: 0.3rem 0.5rem;
                border-bottom: 1px solid var(--border-secondary);
                white-space: normal; /* Allow wrapping for print */
            }
            th { background-color: var(--bg-muted); }
            tbody tr:nth-child(odd), tbody tr:nth-child(even), tbody tr:hover {
                background-color: var(--bg-secondary);
            }
            td input[type="number"] {
                border: 1px dashed #999999; /* Dashed border for inputs */
                width: 4rem; /* Smaller width for print */
                padding: 0.1rem 0.3rem;
                background-color: #f9f9f9;
            }
            .rpe-badge {
                border: 1px solid var(--rpe-border);
                color: var(--rpe-text);
                background-color: var(--rpe-bg);
                padding: 0.1rem 0.4rem;
            }
            .rest-card {
                 background-color: var(--rest-bg);
                 border-color: var(--rest-border);
            }
             .rest-card .card-title {
                 color: var(--rest-title-text);
                 border-color: var(--rest-title-border);
             }
             .rest-card p { color: var(--rest-text); }
             ul { padding-left: 1.5rem; }
             a { text-decoration: none; color: #000000; }
             main { max-width: 100%; }
             .grid { display: block; } /* Linear layout for print */
             .table-container table { min-width: auto; } /* Remove min-width */
        }

        /*------------------------------------*\
          #MOBILE STYLES (Tailwind handles most, but some overrides)
        \*------------------------------------*/
        @media (max-width: 768px) { /* md breakpoint */
             body { padding: 0.5rem; } /* Less padding on small screens */
             header { padding-bottom: 1rem; }
             header h1 { font-size: 1.75rem; } /* Smaller title */
             header p { font-size: 1rem; }
             .action-buttons-container { top: 0.5rem; right: 0.5rem; gap: 0.5rem;} /* Adjust button position */
             .action-button { padding: 0.4rem; }
             .action-button .icon { width: 1rem; height: 1rem;}

             .card { padding: 1rem; margin-bottom: 1rem;}
             .card-title { font-size: 1rem; margin-bottom: 1rem;}
             .card-title .icon { width: 1rem; height: 1rem;}

             th, td { padding: 0.6rem 0.5rem; font-size: 0.8rem; } /* Smaller padding/font in tables */
             th { font-size: 0.65rem; }
             td input[type="number"] { width: 4.5rem; padding: 0.2rem 0.4rem; font-size: 0.8rem;} /* Adjust input size */

             .table-container table { min-width: 600px; } /* Adjust min-width if needed */

             .grid { grid-template-columns: 1fr; } /* Force single column */
             section h2 { font-size: 1.25rem; } /* Smaller section title */
             footer { font-size: 0.65rem; margin-top: 1.5rem; padding-top: 1rem;}
        }

    </style>
</head>

<body class="p-4 md:p-8">

    <header class="mb-8 text-center relative">
        <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-3">Scheda Allenamento</h1>
        <p class="text-lg">Obiettivo: Forza & Ipertrofia (Livello Intermedio)</p>
        <div class="action-buttons-container absolute top-4 right-4 md:top-6 md:right-8 flex gap-2">
             <button id="theme-toggle" title="Cambia Tema" class="action-button">
                 <span id="theme-icon-light" data-lucide="sun" class="icon"></span>
                 <span id="theme-icon-dark" data-lucide="moon" class="icon hidden"></span>
             </button>
             <button id="printBtn" title="Stampa Scheda" class="action-button">
                 <span data-lucide="printer" class="icon"></span>
             </button>
        </div>
    </header>

    <main class="max-w-7xl mx-auto">
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10">
            <div class="card">
                <h2 class="card-title">
                    <span data-lucide="user-circle-2" class="icon"></span>
                    I Tuoi Dati
                </h2>
                <ul class="space-y-2 text-sm md:text-base">
                    <li class="flex items-center"><span class="font-medium text-slate-700 dark:text-slate-300 w-24 md:w-28">Età:</span> 24 anni</li>
                    <li class="flex items-center"><span class="font-medium text-slate-700 dark:text-slate-300 w-24 md:w-28">Peso:</span> 70 kg</li>
                    <li class="flex items-center"><span class="font-medium text-slate-700 dark:text-slate-300 w-24 md:w-28">Altezza:</span> 175 cm</li>
                    <li class="flex items-center"><span class="font-medium text-slate-700 dark:text-slate-300 w-24 md:w-28">Livello:</span> Intermedio</li>
                    <li class="flex items-center"><span class="font-medium text-slate-700 dark:text-slate-300 w-24 md:w-28">Frequenza:</span> 4 / settimana</li>
                    <li class="flex items-center"><span class="font-medium text-slate-700 dark:text-slate-300 w-24 md:w-28">Durata:</span> 60-75 min</li>
                </ul>
            </div>
            <div class="card">
                <h2 class="card-title">
                    <span data-lucide="calendar-days" class="icon"></span>
                    Programmazione Settimanale
                </h2>
                <ul class="space-y-1.5 text-sm md:text-base">
                    <li><strong>Lunedì:</strong> Giorno 1 (Upper Body - Forza)</li>
                    <li><strong>Martedì:</strong> Giorno 2 (Lower Body - Forza)</li>
                    <li class="text-slate-400 dark:text-slate-600"><strong>Mercoledì:</strong> Riposo</li>
                    <li><strong>Giovedì:</strong> Giorno 3 (Upper Body - Ipertrofia)</li>
                    <li><strong>Venerdì:</strong> Giorno 4 (Lower Body - Ipertrofia)</li>
                    <li class="text-slate-400 dark:text-slate-600"><strong>Sabato:</strong> Riposo</li>
                    <li class="text-slate-400 dark:text-slate-600"><strong>Domenica:</strong> Riposo</li>
                </ul>
                <p class="text-xs md:text-sm text-slate-500 dark:text-slate-400 mt-4 italic">Nota: Puoi adattare i giorni, mantenendo lo schema e il riposo.</p>
            </div>
        </section>

        <section class="card mb-10">
             <h2 class="card-title">
                 <span data-lucide="flame" class="icon"></span>
                 Riscaldamento (Warmup) / Defaticamento (Cooldown)
             </h2>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                 <div>
                     <h3 class="font-semibold text-slate-700 dark:text-slate-300 mb-2 text-base">Riscaldamento (Pre-Sessione):</h3>
                     <ul class="list-disc list-inside space-y-1 text-sm text-slate-600 dark:text-slate-400 pl-2">
                         <li>5-10 min cardio leggero (cyclette, tapis roulant)</li>
                         <li>Mobilità articolare dinamica (cerchi braccia/gambe, etc.)</li>
                         <li>Serie di attivazione specifiche per gli esercizi principali</li>
                     </ul>
                 </div>
                 <div>
                     <h3 class="font-semibold text-slate-700 dark:text-slate-300 mb-2 text-base">Defaticamento (Post-Sessione):</h3>
                     <ul class="list-disc list-inside space-y-1 text-sm text-slate-600 dark:text-slate-400 pl-2">
                          <li>5-10 min stretching statico leggero</li>
                          <li>Focus sui muscoli allenati (20-30 sec per posizione)</li>
                          <li>Respirazione controllata</li>
                     </ul>
                 </div>
             </div>
        </section>

        <section class="card mb-10">
            <h2 class="card-title">
                <span data-lucide="scale" class="icon"></span>
                Guida alla Scala RPE
            </h2>
            <p class="text-sm md:text-base mb-4">
                L'RPE (Rate of Perceived Exertion) misura l'intensità percepita dello sforzo su una scala da 1 a 10. Ti aiuta a regolare l'allenamento in base a come ti senti quel giorno.
            </p>
            <ul class="list-disc list-inside space-y-1 text-sm text-slate-600 dark:text-slate-400 pl-2">
                <li><strong>RPE 10:</strong> Sforzo massimale, nessuna ripetizione rimasta in canna.</li>
                <li><strong>RPE 9:</strong> Sforzo molto duro, 1 ripetizione rimasta.</li>
                <li><strong>RPE 8:</strong> Sforzo duro, 2 ripetizioni rimaste.</li>
                <li><strong>RPE 7:</strong> Sforzo moderato-duro, 3 ripetizioni rimaste.</li>
                <li><strong>RPE 6:</strong> Sforzo moderato, 4 ripetizioni rimaste.</li>
                <li><strong>RPE 5:</strong> Sforzo leggero-moderato, 5-6 ripetizioni rimaste.</li>
                <li><strong>RPE 1-4:</strong> Sforzo molto leggero, riscaldamento o recupero attivo.</li>
            </ul>
            <p class="text-xs md:text-sm text-slate-500 dark:text-slate-400 mt-4 italic">
                Cerca di essere onesto con te stesso nella valutazione. L'RPE target è indicato nella tabella per guidarti. Inserisci l'RPE effettivo che hai percepito dopo ogni set principale.
            </p>
        </section>

        <section>
            <h2 class="text-2xl font-semibold mb-6 text-center flex items-center justify-center gap-3">
                 <span data-lucide="dumbbell" class="w-6 h-6 text-slate-800 dark:text-slate-200"></span>
                 Dettaglio Allenamenti Settimanali
                 <span data-lucide="dumbbell" class="w-6 h-6 text-slate-800 dark:text-slate-200"></span>
            </h2>

            <article class="card">
                <h3 class="card-title">
                    <span data-lucide="weight" class="icon"></span>
                    Giorno 1: Upper Body (Forza)
                </h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Esercizio</th>
                                <th>Serie</th>
                                <th>Rip.</th>
                                <th>Recupero</th>
                                <th>RPE Target</th>
                                <th>Peso Eff. (kg)</th> <th>RPE Eff.</th> <th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">Panca Piana Bilanciere</td>
                                <td>4</td>
                                <td>4-6</td>
                                <td>2-3 min</td>
                                <td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Panca Piana"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Panca Piana"></td>
                                <td>Spinta esplosiva, controllo discesa</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Rematore Bilanciere</td>
                                <td>4</td>
                                <td>5-8</td>
                                <td>2-3 min</td>
                                <td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Rematore"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Rematore"></td>
                                <td>Schiena dritta, contrazione dorsali</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Overhead Press (in piedi)</td>
                                <td>3</td>
                                <td>5-8</td>
                                <td>2 min</td>
                                <td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Overhead Press"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Overhead Press"></td>
                                <td>Core contratto, no slancio</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Trazioni Sbarra / Lat Machine</td>
                                <td>3</td>
                                <td>6-10</td>
                                <td>1.5 - 2 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Trazioni/Lat"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Trazioni/Lat"></td>
                                <td>Movimento completo, controllo</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Dip alle Parallele</td>
                                <td>3</td>
                                <td>6-10</td>
                                <td>1.5 - 2 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Dip"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Dip"></td>
                                <td>Aggiungere peso se necessario</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article>

            <article class="card">
                 <h3 class="card-title">
                    <span data-lucide="weight" class="icon"></span>
                    Giorno 2: Lower Body (Forza)
                </h3>
                 <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Esercizio</th>
                                <th>Serie</th>
                                <th>Rip.</th>
                                <th>Recupero</th>
                                <th>RPE Target</th>
                                <th>Peso Eff. (kg)</th>
                                <th>RPE Eff.</th>
                                <th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">Squat Bilanciere</td>
                                <td>4</td>
                                <td>4-6</td>
                                <td>2-3 min</td>
                                <td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Squat"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Squat"></td>
                                <td>Profondità controllata (almeno parallelo)</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Stacco Rumeno (RDL)</td>
                                <td>4</td>
                                <td>6-8</td>
                                <td>2-3 min</td>
                                <td><span class="rpe-badge">8-9</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo RDL"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo RDL"></td>
                                <td>Schiena neutra, focus femorali/glutei</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Leg Press</td>
                                <td>3</td>
                                <td>8-10</td>
                                <td>2 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Leg Press"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Leg Press"></td>
                                <td>Range di movimento completo</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Leg Curl (sdraiato/seduto)</td>
                                <td>3</td>
                                <td>8-12</td>
                                <td>1.5 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Leg Curl"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Leg Curl"></td>
                                <td>Contrazione di picco</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Calf Raise (in piedi)</td>
                                <td>4</td>
                                <td>8-12</td>
                                <td>1 - 1.5 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Calf Raise Piedi"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Calf Raise Piedi"></td>
                                <td>Pausa in alto e stretch in basso</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article>

             <article class="card rest-card">
                  <h3 class="card-title">
                     <span data-lucide="bed-double" class="icon"></span>
                     Giorno 3: Riposo
                 </h3>
                 <p class="text-sm md:text-base">Recupero attivo leggero (es. camminata 30-45 min, stretching dinamico) o riposo completo. Ascolta il tuo corpo e favorisci il recupero.</p>
             </article>

            <article class="card">
                 <h3 class="card-title">
                    <span data-lucide="trending-up" class="icon"></span>
                    Giorno 4: Upper Body (Ipertrofia)
                </h3>
                 <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Esercizio</th>
                                <th>Serie</th>
                                <th>Rip.</th>
                                <th>Recupero</th>
                                <th>RPE Target</th>
                                <th>Peso Eff. (kg)</th>
                                <th>RPE Eff.</th>
                                <th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">Panca Inclinata Manubri</td>
                                <td>3-4</td>
                                <td>8-12</td>
                                <td>1.5 - 2 min</td>
                                <td><span class="rpe-badge">7-8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Panca Inclinata"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Panca Inclinata"></td>
                                <td>Focus parte alta petto, stretch</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Pulley Basso / DB Row</td>
                                <td>3-4</td>
                                <td>10-15</td>
                                <td>1.5 min</td>
                                <td><span class="rpe-badge">7-8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Pulley/Row"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Pulley/Row"></td>
                                <td>Contrazione massima scapole</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Shoulder Press Manubri</td>
                                <td>3</td>
                                <td>10-15</td>
                                <td>1.5 min</td>
                                <td><span class="rpe-badge">7-8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Shoulder Press"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Shoulder Press"></td>
                                <td>Movimento controllato</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Alzate Laterali Manubri</td>
                                <td>3</td>
                                <td>12-15</td>
                                <td>1 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Alzate Laterali"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Alzate Laterali"></td>
                                <td>Focus deltoide laterale, no slancio</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Curl Bilanciere EZ / Manubri</td>
                                <td>3</td>
                                <td>10-12</td>
                                <td>1 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Curl"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Curl"></td>
                                <td>Contrazione di picco</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Push Down Cavi (corda/barra)</td>
                                <td>3</td>
                                <td>10-15</td>
                                <td>1 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Push Down"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Push Down"></td>
                                <td>Estensione completa tricipite</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Face Pulls</td>
                                <td>3</td>
                                <td>15-20</td>
                                <td>1 min</td>
                                <td><span class="rpe-badge">7-8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Face Pulls"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Face Pulls"></td>
                                <td>Deltoidi posteriori/cuffia rotatori</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article>

            <article class="card">
                 <h3 class="card-title">
                    <span data-lucide="trending-up" class="icon"></span>
                    Giorno 5: Lower Body (Ipertrofia)
                </h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Esercizio</th>
                                <th>Serie</th>
                                <th>Rip.</th>
                                <th>Recupero</th>
                                <th>RPE Target</th>
                                <th>Peso Eff. (kg)</th>
                                <th>RPE Eff.</th>
                                <th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">Hack Squat / Leg Press</td>
                                <td>3-4</td>
                                <td>10-15</td>
                                <td>2 min</td>
                                <td><span class="rpe-badge">7-8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Hack Squat/Leg Press"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Hack Squat/Leg Press"></td>
                                <td>Profondità e controllo, focus quad</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Affondi Manubri / Bulgari</td>
                                <td>3</td>
                                <td>10-12 / gamba</td>
                                <td>1.5 min</td>
                                <td><span class="rpe-badge">7-8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Affondi/Bulgari"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Affondi/Bulgari"></td>
                                <td>Stabilità, focus gluteo/quad</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Leg Extension</td>
                                <td>3</td>
                                <td>12-15</td>
                                <td>1 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Leg Extension"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Leg Extension"></td>
                                <td>Contrazione di picco, bruciore</td>
                            </tr>
                            <tr>
                                <td class="font-medium">Leg Curl (sdraiato/seduto)</td>
                                <td>3</td>
                                <td>12-15</td>
                                <td>1 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Leg Curl Ipertrofia"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Leg Curl Ipertrofia"></td>
                                <td>Connessione mente-muscolo</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Hip Thrust Bilanciere</td>
                                <td>3-4</td>
                                <td>10-15</td>
                                <td>1.5 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Hip Thrust"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Hip Thrust"></td>
                                <td>Contrazione massima glutei in alto</td>
                            </tr>
                             <tr>
                                <td class="font-medium">Calf Raise (seduto)</td>
                                <td>3</td>
                                <td>15-20</td>
                                <td>1 min</td>
                                <td><span class="rpe-badge">8</span></td>
                                <td><input type="number" step="0.5" placeholder="--" aria-label="Peso effettivo Calf Raise Seduto"></td>
                                <td><input type="number" min="1" max="10" step="0.5" placeholder="--" aria-label="RPE effettivo Calf Raise Seduto"></td>
                                <td>Focus soleo, range completo</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article>

            <article class="card rest-card">
                  <h3 class="card-title">
                     <span data-lucide="bed-double" class="icon"></span>
                     Giorno 6 & 7: Riposo
                 </h3>
                 <p class="text-sm md:text-base">Giornate dedicate al recupero completo. Concentrati su sonno di qualità, nutrizione adeguata e idratazione per ottimizzare la crescita e prevenire il sovrallenamento.</p>
             </article>

        </section>

        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 my-10">
            <div class="card">
                 <h2 class="card-title">
                    <span data-lucide="key-round" class="icon"></span>
                    Principi Chiave
                </h2>
                <ul class="list-disc list-inside space-y-2 text-slate-600 dark:text-slate-400 text-sm pl-2">
                    <li><strong>Sovraccarico Progressivo:</strong> Aumenta gradualmente carico, ripetizioni, serie o riduci il recupero (mantenendo RPE e tecnica). È FONDAMENTALE.</li>
                    <li><strong>Scala RPE (Rate of Perceived Exertion):</strong> Usa la scala RPE (1-10) per autoregolare l'intensità. Mira agli RPE indicati per ogni esercizio.</li>
                     <li><strong>Tecnica > Carico:</strong> Esegui ogni ripetizione con controllo e forma perfetta. Non sacrificare la tecnica per alzare più peso.</li>
                    <li><strong>Monitoraggio:</strong> Tieni un diario (anche digitale o usando i campi qui sopra!) dei carichi, serie, ripetizioni e RPE per tracciare i progressi.</li>
                    <li><strong>Deload Periodico:</strong> Ogni 4-8 settimane, considera una settimana di scarico (riduci volume e/o intensità) per favorire il recupero a lungo termine e prevenire stalli.</li>
                </ul>
            </div>
            <div class="card">
                 <h2 class="card-title">
                    <span data-lucide="utensils-crossed" class="icon"></span>
                    Linee Guida Nutrizionali
                </h2>
                 <ul class="list-disc list-inside space-y-2 text-slate-600 dark:text-slate-400 text-sm pl-2">
                    <li><strong>Surplus Calorico Leggero:</strong> Per ipertrofia, mira a un leggero surplus (~250-500 kcal sopra il tuo TDEE - Total Daily Energy Expenditure).</li>
                    <li><strong>Proteine Adeguate:</strong> Consuma circa 1.6-2.2 grammi di proteine per kg di peso corporeo al giorno (Es: 70kg * 2g = 140g/giorno).</li>
                    <li><strong>Carboidrati Complessi:</strong> Forniscono energia per gli allenamenti e aiutano il recupero (avena, riso integrale, patate dolci, frutta).</li>
                    <li><strong>Grassi Sani:</strong> Essenziali per la salute ormonale e generale (avocado, frutta secca, olio d'oliva).</li>
                    <li><strong>Idratazione:</strong> Bevi abbondante acqua durante tutta la giornata, specialmente prima, durante e dopo l'allenamento.</li>
                    <li><strong>Timing Nutrizionale (Opzionale):</strong> Consumare un pasto/shake con proteine e carboidrati 1-2 ore prima e/o entro 1-2 ore dopo l'allenamento può essere benefico.</li>
                </ul>
                 <p class="text-xs text-slate-500 dark:text-slate-400 mt-4 italic">Queste sono linee guida generali. Per piani nutrizionali personalizzati, consulta un professionista (dietologo o nutrizionista sportivo).</p>
            </div>
        </section>

         <footer class="text-center mt-10 text-xs">
             <p class="mb-2"><strong>Disclaimer:</strong> Questo programma è una linea guida generale. Consulta sempre un medico prima di iniziare qualsiasi nuovo programma di allenamento o regime alimentare. Adatta il piano alle tue sensazioni, capacità e necessità individuali. Presta la massima attenzione alla tecnica di esecuzione per prevenire infortuni. L'autore non si assume responsabilità per eventuali infortuni o problemi derivanti dall'uso improprio di questa scheda.</p>
             <p>&copy; 2025 - Scheda generata per te.</p>
         </footer>

    </main>

    <script>
        const themeToggle = document.getElementById('theme-toggle');
        const printButton = document.getElementById('printBtn');
        const docHtml = document.documentElement; // Get the <html> element
        const themeIconLight = document.getElementById('theme-icon-light');
        const themeIconDark = document.getElementById('theme-icon-dark');

        // Function to apply theme (light/dark)
        const applyTheme = (theme) => {
            if (theme === 'dark') {
                docHtml.classList.add('dark');
                themeIconLight.classList.add('hidden');
                themeIconDark.classList.remove('hidden');
            } else {
                docHtml.classList.remove('dark');
                themeIconLight.classList.remove('hidden');
                themeIconDark.classList.add('hidden');
            }
             // Re-render icons after theme change if needed (sometimes useful)
             lucide.createIcons();
        };

        // Function to toggle theme
        const toggleTheme = () => {
            const currentTheme = docHtml.classList.contains('dark') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', newTheme); // Save preference
            applyTheme(newTheme);
        };

        // Event Listener for Theme Toggle Button
        if (themeToggle) {
            themeToggle.addEventListener('click', toggleTheme);
        }

        // Event Listener for Print Button
        if (printButton) {
            printButton.addEventListener('click', () => {
                window.print(); // Open browser print dialog
            });
        }

        // Funzione per salvare i dati degli input nel localStorage
        const saveInputData = () => {
            const inputs = document.querySelectorAll('input[type="number"]');
            const data = {};
            
            inputs.forEach((input, index) => {
                // Usa l'aria-label come identificatore unico o un indice se non disponibile
                const id = input.getAttribute('aria-label') || `input-${index}`;
                data[id] = input.value;
            });
            
            localStorage.setItem('schedaAllenamentoData', JSON.stringify(data));
            console.log('Dati salvati nel localStorage');
        };
        
        // Funzione per caricare i dati dal localStorage
        const loadInputData = () => {
            const savedData = localStorage.getItem('schedaAllenamentoData');
            if (savedData) {
                const data = JSON.parse(savedData);
                const inputs = document.querySelectorAll('input[type="number"]');
                
                inputs.forEach((input, index) => {
                    const id = input.getAttribute('aria-label') || `input-${index}`;
                    if (data[id]) {
                        input.value = data[id];
                    }
                });
                
                console.log('Dati caricati dal localStorage');
            }
        };
        
        // Aggiunge event listener a tutti gli input per salvare i dati quando cambiano
        const setupInputListeners = () => {
            const inputs = document.querySelectorAll('input[type="number"]');
            inputs.forEach(input => {
                input.addEventListener('change', saveInputData);
                input.addEventListener('input', saveInputData);
            });
            console.log('Event listener per il salvataggio dati configurati');
        };

        // Initial Setup on Load
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Initialize Lucide Icons
            lucide.createIcons();
            console.log("Scheda allenamento caricata, icone inizializzate.");

            // 2. Apply saved theme or detect system preference
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedTheme) {
                applyTheme(savedTheme);
                console.log(`Tema caricato da localStorage: ${savedTheme}`);
            } else if (prefersDark) {
                applyTheme('dark');
                console.log("Tema scuro preferito dal sistema applicato.");
            } else {
                 applyTheme('light'); // Default to light
                 console.log("Tema chiaro di default applicato.");
            }
            
            // 3. Carica i dati salvati e configura i listener per il salvataggio
            loadInputData();
            setupInputListeners();

            // 4. Log readiness
            console.log("Funzionalità Stampa, Tema e Salvataggio Dati attive!");
        });
    </script>

</body>
</html>
